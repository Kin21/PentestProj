from pymetasploit3.msfrpc import MsfRpcClient
import subprocess
# Metasploit
msfrpc_password = 'temppassword'


def startMsfrpcServer():
    print('Starting msfrpc server')
    check = subprocess.run(['sudo lsof -i -P -n | grep 55553'], shell=True, capture_output=True)
    if check.stdout:
        return
    global msfrpc_password
    subprocess.run(['/opt/metasploit-framework/bin/msfrpcd', '-P', msfrpc_password, '-S'])


startMsfrpcServer()
msf_client = MsfRpcClient(msfrpc_password, port=55553)

# Variables for visualization
step = 0
VISUALIZE = False

# Path
searchsploit_path = '/home/kk/Desktop/exploitdb/searchsploit'
exploit_db_path = '/home/kk/Desktop/exploitdb'
msf4_dir_path = '/root/.msf4/modules/exploits/pentest_proj'

