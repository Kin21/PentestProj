import time

from my_objects import Test, run_as_root
from interactive_visualisation import Visualizer
import networkx as nx
import pickle
from my_database import VulnerabilityMapper



if __name__ == '__main__':
    start_time = time.time()
    run_as_root()
    g = nx.Graph()
    test_obj = Test(g, target_from_file='test_target.json')
    test_obj.run()
    filename = 'test_object2'
    with open(filename, 'wb') as f:
        pickle.dump(test_obj, f)
    v = Visualizer(test_obj)
    filename = v.create_html_visualization()
    print('Report in', filename)
    end_time = time.time()
    print('Run took {} s'.format(str(end_time - start_time)))
